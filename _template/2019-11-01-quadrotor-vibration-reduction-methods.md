---
layout: post
category: blog
title: Vibration reduction methods for quadrotors
snippet: How to mechanically damp out as much noise on those IMU signals as possible.
tags: [robotics, hardware]
katex: True
---

# Overview

<div class="tip">
"One of the most noticeable problems with high vibrations is in attitude estimation. MEMS gyros and accelerometers can be very sensitive to vibration, and the filtering algorithm can not always fix the problem. The vibration can sometimes cause significant drift or divergence of the filtering algorithm, making the attitude estimation useless." [1]
</div>



## TL;DR:
* The best results are in a combination of both mechanical damping and software filtering. Please note these are NOT equivalent. For example, if the bias of the gyro seems to change significantly at certain throttle settings it can not be undone with filtering afterwards, while mechanical damping can help prevent the bias change in the first place. [[1]](http://wiki.paparazziuav.org/wiki/Vibration)
* Two strategies: Mechanical isolation is generally best, and can be applied (ideally) at the source of the vibration, or at the interface of a particularly sensitive component (i.e. IMU or camera). Isolating at the source helps all parts of the airframe, not just a single component. [[1]](http://wiki.paparazziuav.org/wiki/Vibration)
* Note that a low-pass filter on the gyroscopes in an IMU is almost never useful, while filtering on the accelerometers is usually better. [[1]](http://wiki.paparazziuav.org/wiki/Vibration)
Although vibrations can affect the standard deviation and noise levels in accelerometer data, the effect on gyroscopes is much more subtle: "it is not the noise band that is detrimental, but the fact that vibrations can change the bias (rapidly).
Make sure no other things touching the FC that can transfer vibration from the quad, such as wires or zip ties. [[2]](https://oscarliang.com/soft-mounting-fc-motors/)
* The lighter the electronics, the harder it is to dampen it. [[1]](http://wiki.paparazziuav.org/wiki/Vibration)
* Mechanical damping until all vibrations are at least within 'measurement range' at all frequencies [[1]](http://wiki.paparazziuav.org/wiki/Vibration)
* accelerometer should be filtering BEFORE attitude and heading  computations
* gyro filtering should be AFTER INTEGRATION in attitude and heading since simple filtering (e.g. $$x_f = \frac{(x_m-x_f)}{K}$$ ) can distort the integral

## Vibration damping for IMU (Flight Controller)

A lot of these are taken from [[3]](http://ardupilot.org/copter/docs/common-vibration-damping.html)

| Damping| Description | Damping Effects                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Foam / Double sided Foam Tape                                          | Cut into small 1cm ~ 2cm cubes and attached to each of the four corners of the flight controller                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Easy, effective, but won't be able to stack on top or bottom. Great for lighter electronics, since other methods may amplify it.                                                                                                                                                                                                                                                                                                                                                                                                |
| Gel Pads                                                               | Cut one of the recommended gels into 1cm ~ 2cm cubes and attach to each corner of the flight controller.Secure the flight controller to the frame with 1cm) wide velcro retaining strap or a rubber band. Be careful the strap does not hold down the controller so securely that it interferes with the damping of the pads. Consider putting a layer of soft foam between the strap and the flight controller.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | [A comparison video]( https://diydrones.com/profiles/blogs/testing-simple-anti-vibration-solutions-for-gopro-on-an), [Single layer moongel]( https://diydrones.com/forum/topics/apm-2-9-loiter-alt-hold-vibration-dampening-solution)                                                                                                                                                                                                                                                                                                      |
| Vibration damping balls                                                | Mount FC directly onto damper                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Replaces the screws directly, easy mounting                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 3D Printed Anti-Vibration Platform                                     | The mount can be installed using double sided tape, or M3 screws spaced at 45mm x 45mm.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Too complex                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| O-ring Suspension Mount                                                | Create a platform upon which to mount your flight control board with holes or screws on the four corners. Mount your flight controller on this board with double sided foam tape.Mount 4 standoffs on the top of your frame spaced 1/10” to 1/8” further apart than the width of the platform upon which the control board has been mounted.Insert 1/16” nylon O-rings through each corner of the flight control board and the standoffs so that the flight controller has no hard connections to the frame. Link (Here!)The overall O-ring diameter should be chosen to firmly retain the board while providing for light to moderate initial but rapidly snubbed movement of the board (generally 1/2” to 3/4” OD) and Silicone O-rings should generally damp better than Buna-N O-rings (Sizes 15 - 21) if you can acquire them.                                                                                | Vibrations are short coupled, so all that leaving excess corner clearance does is to require higher initial O-ring tension which reduces vibration damping responsiveness and allows the board to physically tilt more (which is undesirable as it throws the sensor to airframe relationship off).O-rings generally aren’t the best idea because they are too thin and often are made of harder material that doesn’t damp vibrations. Not to mention the screws are still passing vibration through to the flight controller. |
| Ear Plug Mount                                                         | Purchase slow response silicon or urethane foam or PVC foam earplugs such as these from 3MCreate a platform upon which to mount your flight control board with holes at the four corners. The holes should be large enough to allow the ear plugs to be inserted into them but not so loose that the board comes loose during hard landings. Ensure the holes are smooth so they do not cut into the ear plugs. Also keep the holes near the corners of your electronic module plate as possible to minimize unnecessary module movement.Mount your flight controller on this board with double sided foam tape. Extra mass added to the board may improve vibration damping.Squeeze the earplugs through existing holes in the frame (or cut new holes) and the holes in the board upon which the flight controller is mounted. “Tuning” is possible by varying the amount of earplug left exposed in the middle. | it only works if your board has over-size holes that fit these grommets.                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Bulb Damper + Ear Plug Vibration Mount + FC on anti-vibration grommets | Mounting plate with a 100g soft rubber bulb type “gimbal” damper at each corner and a half a urethane foam earplug placed inside each one.Gimbal bulb type dampers themselves can work in tension or compression.The earplugs provide an additional damping medium with a different frequency damping range than the bulb dampers by themselves.The ear plugs also stiffen the bulb mounts up a bit preventing excessive free motion being caused by normal flight maneuvers.This was successful at damping a Flamewheel clone with flexible arms and over size 12” propellers into the .05 G range.                                                                                                                                                                                                                                                                                                               | Very complex                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| Anti-vibration M3 Bobbins                                              | Screw the boards on as usual using the bobbins                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | They are easy to get, affordable yet works exactly like nylon standoffs.Some simple rubber bobbins on PCBs for instance can also increase the vibration amplitude.  [[1]](http://wiki.paparazziuav.org/wiki/Vibration)                                                                                                                                                                                                                                                                                                               |


## Vibration Isolation for Motors 
This section is taken from [[2]](https://oscarliang.com/soft-mounting-fc-motors/). 



The source of vibration is the motors because they are the only moving part in a mini quad. Therefore soft mounting could be very effective if you can stop the vibrations right at where they start and getting to the flight controller.

Damping effectiveness can be affected by the mass attached and dampener elasticity. FC’s are so light, the damping might not be enough. Damping at the motors might be a better option as they are heavier than an FC. From the website:


> Update (21/05/2017): After soft mounting motors for a few days I found it too much of a hassle. You can’t tighten the motor screws so you have to check them every session or risk screws falling out during flights. Although it could be a more effective way of isolating vibrations than soft
mounting FC, the result could varies a lot as you can’t control the tightness in the screws to be all the same in the 4 motors.
>
> So i think soft mounting FC is more practical, and I might just do that and not soft mount my motors in the future unless they are really that bad and I have to.


Some options:
* Electrical tape (3 layers or more)
* TPU 3D printed motor mounts
* Rubber sheet cut specifically for mini quads (such as these – Monkey & Gorilla-Rugz)
* 3M mounting tape (double sided)
* Silica Gel Pads (link to Product)
* One thing to be aware of is you shouldn’t tighten the motor screws all the way, it will compress the the vibration dampening material and it will be less capable of absorbing the vibrations. Make sure to apply loctite on the screws as well as you are leaving the screws loose.


## Resources
1. [http://wiki.paparazziuav.org/wiki/Vibration](http://wiki.paparazziuav.org/wiki/Vibration)
2. [https://oscarliang.com/soft-mounting-fc-motors/](https://oscarliang.com/soft-mounting-fc-motors/) flight controller + motors
3. [http://ardupilot.org/copter/docs/common-vibration-damping.html](http://ardupilot.org/copter/docs/common-vibration-damping.html) long list of dampers for mounting flight controllers
4.  [https://diydrones.com/profiles/blogs/very-good-anti-vibration-results-with-following-apm2-5-mount-quad](https://diydrones.com/profiles/blogs/very-good-anti-vibration-results-with-following-apm2-5-mount-quad)

5. [https://diydrones.com/forum/topics/vibration-isolation-and-dampening-of-apm-px4-for-version-2-9](https://diydrones.com/forum/topics/vibration-isolation-and-dampening-of-apm-px4-for-version-2-9)
6. [http://www.imavs.org/papers/2017/237_imav2017_proceedings.pdf](http://www.imavs.org/papers/2017/237_imav2017_proceedings.pdf)
